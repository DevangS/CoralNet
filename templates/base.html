{% load i18n %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{% block title %}CoralNet{% endblock %}</title>

    <meta charset="utf-8" />
    <meta name="description" content="Coral Research in the 21st century" />
    <meta name="keywords" content="corals, research, annotation, UCSD, University of California San Diego, open source" />
    <meta name="author" content="UCSD CVCE" />

    <link rel="stylesheet" type="text/css" media="screen" href="{{ STATIC_URL }}css/master.css" />
    <link rel="shortcut icon" type="image/ico" href="/favicon.ico" />

    {# jQuery from Google APIs.  Why: http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/ #}
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
    {# If can't connect to Google APIs (offline development, etc.), can fall back to a copy of jQuery from within our project. Source: http://community.mybb.com/thread-83861-post-611152.html#pid611152 #}
    <script>
    if (!window.jQuery)
        document.write('<script src="{{ STATIC_URL }}js/jquery-1.6.2.min.js"><\/script>');
    </script>

    {% comment %}
    CSS or JS includes, or stuff like {{ form.media }}, can go here. -Stephen
    {% endcomment %}
    {% block media-includes %}{% endblock %}

    {% comment %}
    Page-header JavaScript functions can go here.
    (Though it's often better to include an external .js instead). -Stephen
    {% endcomment %}
    {% block javascript-functions %}{% endblock %}

    {% comment %}
    Template-specific CSS can go here.
    (If not page specific, it's often better to include it in master.css.). -Stephen
    {% endcomment %}
    {% block css-code %}{% endblock %}

  </head>
  <body>
    <div id="top">
      {% if messages %}
      <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message|linebreaksbr }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
 
    <div id="container">

      <div id="header">

        {% block nav %}
        <div class="nav_container" id="nav_main_container">
          <ul class="nav nav_left" id="nav_main">
            <li><a href="{% url index %}"><span>{% trans 'Home' %}</span></a></li>
            <li><a href="{% url source_list %}"><span>{% trans 'Sources' %}</span></a></li>
            <li><a href="{% url label_list %}"><span>{% trans 'Labels' %}</span></a></li>
          </ul>
          <ul class="nav nav_right" id="nav_user">
            {% if user.is_authenticated %}
              {% with num_invites_received=user.invites_received.count %}
                {% if num_invites_received > 0 %}
                <li class="button_prominent"><a href="{% url invites_manage %}"><span>{% trans 'Invites' %} ({{ num_invites_received }})</span></a></li>
                {% else %}
                <li><a href="{% url invites_manage %}"><span>{% trans 'Invites' %}</span></a></li>
                {% endif %}
              {% endwith %}
            <li><a href="{% url userena_profile_detail user.username %}"><span>{% trans 'Account' %} ({{ user.username }})</span></a></li>
            <li><a href="{% url userena_signout %}"><span>{% trans 'Signout' %}</span></a></li>
            {% else %}
            <li><a href="{% url userena_signin %}"><span>{% trans 'Signin' %}</span></a></li>
            <li><a href="{% url request_account %}"><span>{% trans 'Signup' %}</span></a></li>
            {% endif %}
          </ul>
        </div>
        {% endblock %}{# /nav #}

        {% if not user.is_authenticated %}
        <div id="try"></div>
        {% endif %}

      </div><!-- /header -->

      <div id="content-container">
        {% block content %}{% endblock %}
      </div><!-- /content-container-->

      <div id="footer">
        <div class="nav_container" id="nav_footer_container">
          <ul class="nav nav_left" id="nav_footer">
            {% if user.is_authenticated %}
            <li class="button_prominent"><a href="{% url feedback_form %}"><span>{% trans 'Site Feedback' %}</span></a></li>
            {% endif %}
          </ul>
        </div>
        {% block footer_extra %}{% endblock %}
      </div><!-- /footer -->
    
    </div><!-- /container -->
  </body>
</html>
