{% extends "images/base_source.html" %}
{% load thumbnail %}
{% load dajaxice_templatetags %}

{% block title %}Upload Images | CoralNet{% endblock %}

{% block media-includes %}
  {{ block.super }}
  {% dajaxice_js_import %}
  {{ imageUploadForm.media }} {# CSS and JS #}
{% endblock %}

{% block content %}

    {% if uploadedImages %}
    <div>
      <h2>Just uploaded (up to 5 shown):</h2>
      {% for image in uploadedImages %}
        <a href="{% url image_detail source.id image.id %}">
          <img src="{% thumbnail image.original_file 100x100 %}"
               title="{{ image.get_image_element_title }}"/>
        </a>
      {% endfor %}
    </div>

    <hr />
    {% endif %}

    <legend>Upload Images</legend>

    <form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
        {% include "form_generic.html" with form=imageUploadForm %}
        {% for detail in imageUploadForm.additional_details %}
            <span class="helptext">{{ detail|linebreaksbr }}</span>
        {% endfor %}

        <div class="submit_button_wrapper">
            <input type="submit" id="id_upload_submit" value="Upload Images" />
        </div>
    </form>

    <!-- Preview the files selected for upload. -->
    <div id="previewArea">

    </div>

    <!-- Script in the body will run on page load. -->
    <script type="text/javascript">

        ImageUploadFormHelper.initForm("previewArea", {{ source.id }});

    </script>

{% endblock %}
